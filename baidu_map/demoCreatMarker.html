<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>baidu map api</title>
    <style type="text/css">
    </style>
    <link rel="stylesheet" href="../vendor/application.css">
    <script src="../vendor/application.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.5&ak=k75vyRMTMZA96lTGftEOVWZp"></script>
</head>

<body>
    <div class="row">
        <div class="col-md-9 ">
            <div class="col-md-12 mode">
                <label>
                    <input type="text" value="苏州" />
                </label>
                <label>
                    <input type="checkbox" value="苏大独墅湖校区" class="chooseDestiation" />苏大独墅湖校区</label>
                <label>
                    <input type="checkbox" value="拙政园" class="chooseDestiation" />拙政园</label>
            </div>

            <div id="container"></div>
        </div>
        <div class="col-md-3" class="col-md-12">
            <div>
                <h1>设为中心</h1>
                <select class="uniform" name="colors">

                </select>
            </div>
        </div>
    </div>
    <style type="text/css">
    #container {
        width: 100%;
        height: 500px;
    }
    .mode {
        padding: 10px 0;
        overflow: hidden;
    }
    .mode label {
        line-height: 24px;
    }
    </style>

    <script type="text/javascript">
    var map = new BMap.Map("container"); // 创建地图实例  
    map.centerAndZoom('苏州', 15);
    map.enableScrollWheelZoom(); //滚轮缩放大小

    var marker1 = new BMap.Marker(new BMap.Point(120.619, 31.317)); // 创建标注
    map.addOverlay(marker1); // 将标注添加到地图中
    //创建信息窗口
    var infoWindow1 = new BMap.InfoWindow("这是我自定义的");
    marker1.openInfoWindow(infoWindow1);


/*
    var sContent =
        "<h4 style='margin:0 0 5px 0;padding:0.2em 0'>天安门</h4>" +
        "<img style='float:right;margin:4px' id='imgDemo' src='http://app.baidu.com/map/images/tiananmen.jpg' width='139' height='104' title='天安门'/>" +
        "<p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>天安门坐落在中国北京市中心,故宫的南侧,与天安门广场隔长安街相望,是清朝皇城的大门...</p>" +
        "</div>";
    var map = new BMap.Map("allmap");
    var point = new BMap.Point(116.404, 39.915);
    var marker = new BMap.Marker(point);
    var infoWindow = new BMap.InfoWindow(sContent); // 创建信息窗口对象
    map.centerAndZoom(point, 15);
    map.addOverlay(marker);
    marker.addEventListener("click", function() {
        this.openInfoWindow(infoWindow);
        //图片加载完毕重绘infowindow
        document.getElementById('imgDemo').onload = function() {
            infoWindow.redraw(); //防止在网速较慢，图片未加载时，生成的信息框高度比图片的总高度小，导致图片部分被隐藏
        }
    });
*/


    

    function setDestination(a) {
        var center = map.getCenter();
        map.centerAndZoom(center, 15);
        var local = new BMap.LocalSearch(map, {
            renderOptions: {
                map: map
            }
        });
        local.search(a);
    }
    $('.chooseDestiation').change(function() {
        var chooseInput = $('input:checked');
        var srachName = $.map(chooseInput, function(n) {
            return ($(n).val());
        });
        setDestination(srachName);
        for (var i = 0; i < srachName.length; i++) {
            $('.uniform').append("<option value=" + srachName[i] + ">" + srachName[i] + "</option>")
        };
    })
    </script>
</body>

</html>
